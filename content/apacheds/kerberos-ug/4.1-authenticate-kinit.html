<!DOCTYPE html>

<html lang="en">
<head>
    <title>4.1 - Authenticate with kinit on Linux &mdash; Apache Directory</title>

    <link href="/css/common.css" rel="stylesheet" type="text/css"/>
    <link href="/css/green.css" rel="stylesheet" type="text/css"/>

    <link rel="shortcut icon" href="/images/server-icon_16x16.png">
</head>
<body>
<div id="container">
    <div id="header">
    <div id="subProjectsNavBar">
        <a href="/">
             
                Main
            
        </a>
        &nbsp;|&nbsp;
        <a href="/apacheds/">
            
                <strong>ApacheDS</strong>
            
        </a>
        &nbsp;|&nbsp;
        <a href="/studio/">
             
                Studio
            
        </a>
        &nbsp;|&nbsp;
        <a href="/api/">
             
                LDAP API
            
        </a>
        &nbsp;|&nbsp;
        <a href="/mavibot/">
             
                Mavibot
            
        </a>
        &nbsp;|&nbsp;
        <a href="/scimple/">
             
                SCIMple
            
        </a>
        &nbsp;|&nbsp;
        <a href="/fortress/">
             
                Fortress
            
        </a>
        &nbsp;|&nbsp;
        <a href="/kerby/">
             
                Kerby
            
        </a>
    </div>
</div>


    <div id="content">
        <div id="leftColumn">
            <div id="navigation">
                
                <h5>ApacheDS 2.0</h5>
                <ul>
                    <li><a href="/apacheds/">Home</a></li>
                    <li><a href="/apacheds/news.html">News</a></li>
                    <li><a href="/apacheds/features.html">Features</a></li>
                </ul>

                <h5>Downloads</h5>
                <ul>
                    <li><a href="/apacheds/downloads.html">ApacheDS 2.0.0.AM26</a>&nbsp;&nbsp;<img src="/images/new_badge.gif" alt="" style="margin-bottom:-3px;" border="0"></li>
                    <li><a href="/apacheds/download-old-versions.html">Older versions</a></li>
                </ul>

                <h5>Documentation</h5>
                <ul>
                    <li><a href="/apacheds/basic-user-guide.html">Basic User Guide </a></li>
                    <li><a href="/apacheds/advanced-user-guide.html">Advanced User Guide</a></li>
                    <li><a href="/apacheds/developer-guide.html">Developer Guide</a></li>
                    <li><a href="/apacheds/kerberos-user-guide.html">Kerberos User Guide</a></li>
                    <li><a href="/apacheds/configuration/ads-2.0-configuration.html">Configuration</a></li>
                    <li><a href="/apacheds/gen-docs/latest/apidocs">JavaDocs</a></li>
                    <li><a href="/apacheds/gen-docs/latest/xref">Cross-Reference</a></li>
                </ul>

                <h5>Support</h5>
<ul>
    <li><a href="/mailing-lists-and-irc.html">Mailing Lists &amp; IRC</a></li>
    <li><a href="/sources.html">Sources</a></li>
    <li><a href="/issue-tracking.html">Issue Tracking</a></li>
    <li><a href="/commercial-support.html">Commercial Support</a></li>
</ul>

<h5>Community</h5>
<ul>
    <li><a href="/contribute.html">How to Contribute</a></li>
    <li><a href="/team.html">Team</a></li>
    <li><a href="/original-project-proposal.html">Original Project Proposal</a></li>
    <li><a href="/special-thanks.html" class="external-link" rel="nofollow">Special Thanks</a></li>
</ul>

<h5>About Apache</h5>
<ul>
    <li><a href="http://www.apache.org/">Apache</a></li>
    <li><a href="http://www.apache.org/licenses/">License</a></li>
    <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
    <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
    <li><a href="http://www.apache.org/security/">Security</a></li>
</ul>

            </div>
        </div>
        <div id="rightColumn">
            
    <div class="nav">
        <div class="nav_prev">
            
                
                <a href="4-using-kerberos">4 - Using Kerberos</a>
            
        </div>
        <div class="nav_up">
            
                
                <a href="4-using-kerberos.html">4 - Using Kerberos</a>
            
        </div>
        <div class="nav_next">
            
                
                <a href="4.2-authenticate-studio.html">4.2 - Authenticate with Studio</a>
            
        </div>
        <div class="clearfix"></div>
    </div>


            
	<h1 id="41---authenticate-with-kinit-on-linux">4.1 - Authenticate with kinit on Linux</h1>
<p>##Setup</p>
<p>You first have to make sure <strong>kinit</strong> is installed.</p>
<p>You can check that by typing <strong>kinit</strong> in a console :</p>
<pre><code>$ kinit --version
kinit (Heimdal 1.4.1apple1)
Copyright 1995-2010 Kungliga Tekniska HÃ¶gskolan
Send bug-reports to heimdal-bugs@h5l.org
$
</code></pre>
<p>Then, you have to configure the <strong>krb5.conf</strong> file (it can be found in <strong>/etc/krb5.conf</strong>, if not just add it).</p>
<p>A minimal /etc/krb5.conf file looks as follows (make sure the port and host name matches!):</p>
<pre><code>[libdefaults]
    default_realm = EXAMPLE.COM

[realms]
    EXAMPLE.COM = {
            kdc = example.net:60088
    }

[domain_realm]
    .example.com = EXAMPLE.COM
    example.com = EXAMPLE.COM
</code></pre>
<p>Check that the <strong>Kerberos</strong> sevrer is started, then try to get a ticket from a user that exists in the base (here, we use hnelson, which is a user we created for test purposes. His password is &lsquo;secret&rsquo;)</p>
<pre><code>$ kinit hnelson@EXAMPLE.COM
Password for hnelson@EXAMPLE.COM:
$
</code></pre>
<p>You should not get any error. If you&rsquo;ve get some, see later in this chapter.</p>
<p>Now, let&rsquo;s check that we have correctly obtained a ticket. We will use the <strong>klist</strong> tool for that :</p>
<pre><code>$ klist -v
Credentials cache: API:501:9
        Principal: hnelson@EXAMPLE.COM
    Cache version: 0

Server: krbtgt/EXAMPLE.COM@EXAMPLE.COM
Client: hnelson@EXAMPLE.COM
Ticket etype: aes128-cts-hmac-sha1-96
Ticket length: 256
Auth time:  Feb 11 16:11:36 2013
End time:   Feb 12 02:11:22 2013
Renew till: Feb 18 16:11:36 2013
Ticket flags: pre-authent, initial, renewable, forwardable
Addresses: addressless
$
</code></pre>
<p>As we can see, we have obtained a ticket which will expire 6 hours after its creation, which can be renexed for 7 days, encrypted using AES-128 algorithm, ticket that can be used by the <strong>TGS</strong>.</p>
<p>All is good !</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>So it does not work&hellip;</p>
<p>There are many possible reason why you can&rsquo;t get a ticket.</p>
<h3 id="kinit-krb5_get_init_creds-unable-to-reach-any-kdc-in-realm-examplecom">kinit: krb5_get_init_creds: unable to reach any KDC in realm EXAMPLE.COM</h3>
<p>Such a error says that the server is not reachable. Check those points :</p>
<ul>
<li>Is the server started ?</li>
<li>Is the EXAMPLE.COM domain declared in your DNS (or /etc/hosts file) ?</li>
</ul>


            
    <div class="nav">
        <div class="nav_prev">
            
                
                <a href="4-using-kerberos">4 - Using Kerberos</a>
            
        </div>
        <div class="nav_up">
            
                
                <a href="4-using-kerberos.html">4 - Using Kerberos</a>
            
        </div>
        <div class="nav_next">
            
                
                <a href="4.2-authenticate-studio.html">4.2 - Authenticate with Studio</a>
            
        </div>
        <div class="clearfix"></div>
    </div>


        </div>
        <div id="endContent"></div>
    </div>

    <div id="footer">
    &copy; 2003-2020, <a href="http://www.apache.org">The Apache Software Foundation</a> - <a href="/privacy-policy.html">Privacy Policy</a><br />
    Apache Directory, ApacheDS, Apache Directory Server, Apache Directory Studio, Apache LDAP API, Apache Triplesec,
    Triplesec, Apache Mavibot, Mavibot, Apache eSCIMo, eSCIMo, Apache SCIMple, SCIMple,Fortress, Apache Fortress, EnMasse,
    Apache EnMasse, Apache Kerby, Kerby, Apache, the Apache feather logo, and the Apache Directory project logos are
    trademarks of The Apache Software Foundation.
</div>

</div>

</body>

</html>
