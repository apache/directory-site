<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>2.2.5 - Generic Instance Layout &mdash; Apache Directory</title>

    <link href="/css/common.css" rel="stylesheet" type="text/css"/>
    <link href="/css/green.css" rel="stylesheet" type="text/css"/>

    <link rel="shortcut icon" href="/images/server-icon_16x16.png" />
    <script src="https://www.apachecon.com/event-images/snippet.js"></script>
</head>

<body>
<div id="container">
    <div id="header">
    <a href="/"><div id="headerClick"></div></a>
    <div id="subProjectsNavBar">
        <a href="/">
             
                Main
            
        </a>
        &nbsp;|&nbsp;
        <a href="/apacheds/">
            
                <strong>ApacheDS</strong>
            
        </a>
        &nbsp;|&nbsp;
        <a href="/studio/">
             
                Studio
            
        </a>
        &nbsp;|&nbsp;
        <a href="/api/">
             
                LDAP API
            
        </a>
        &nbsp;|&nbsp;
        <a href="/mavibot/">
             
                Mavibot
            
        </a>
        &nbsp;|&nbsp;
        <a href="/scimple/">
             
                SCIMple
            
        </a>
        &nbsp;|&nbsp;
        <a href="/fortress/">
             
                Fortress
            
        </a>
        &nbsp;|&nbsp;
        <a href="/kerby/">
             
                Kerby
            
        </a>
    </div>
</div>


    <div id="content">
        <div id="leftColumn">
            <div id="navigation">
                
                <a class="acevent" data-format="wide" data-width="170"></a>
                <h5>ApacheDS 2.0</h5>
                <ul>
                    <li><a href="/apacheds/">Home</a></li>
                    <li><a href="/apacheds/news.html">News</a></li>
                    <li><a href="/apacheds/features.html">Features</a></li>
                    <li><a href="/apacheds/production-readiness.html">Production Readiness</a></li>
                </ul>

                <h5>Downloads</h5>
                <ul>
                    <li><a href="/apacheds/downloads.html">ApacheDS 2.0.0.AM27</a>&nbsp;&nbsp;<img src="/images/new_badge.gif" alt="" style="margin-bottom:-3px;" border="0"></li>
                    <li><a href="/apacheds/download-old-versions.html">Older versions</a></li>
                </ul>

                <h5>Documentation</h5>
                <ul>
                    <li><a href="/apacheds/basic-user-guide.html">Basic User Guide </a></li>
                    <li><a href="/apacheds/advanced-user-guide.html">Advanced User Guide</a></li>
                    <li><a href="/apacheds/developer-guide.html">Developer Guide</a></li>
                    <li><a href="/apacheds/kerberos-user-guide.html">Kerberos User Guide</a></li>
                    <li><a href="/apacheds/configuration/ads-2.0-configuration.html">Configuration</a></li>
                    <li><a href="/apacheds/gen-docs/latest/apidocs">JavaDocs</a></li>
                    <li><a href="/apacheds/gen-docs/latest/xref">Cross-Reference</a></li>
                </ul>

                <h5>Support</h5>
<ul>
    <li><a href="/mailing-lists-and-irc.html">Mailing Lists &amp; IRC</a></li>
    <li><a href="/sources.html">Sources</a></li>
    <li><a href="/issue-tracking.html">Issue Tracking</a></li>
    <li><a href="/commercial-support.html">Commercial Support</a></li>
</ul>

<h5>Community</h5>
<ul>
    <li><a href="/contribute.html">How to Contribute</a></li>
    <li><a href="/team.html">Team</a></li>
    <li><a href="/original-project-proposal.html">Original Project Proposal</a></li>
    <li><a href="/special-thanks.html" class="external-link" rel="nofollow">Special Thanks</a></li>
</ul>

<h5>About Apache</h5>
<ul>
    <li><a href="https://www.apache.org/">Apache</a></li>
    <li><a href="https://www.apache.org/licenses/">License</a></li>
    <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
    <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
    <li><a href="https://www.apache.org/security/">Security</a></li>
</ul>

            </div>
        </div>
        <div id="rightColumn">
            
    <div class="nav">
        <div class="nav_prev">
            
                
                <a href="2.2.4-windows-instance-layout.html">2.2.4 - Windows Instance Layout</a>
            
        </div>
        <div class="nav_up">
            
                
                <a href="2.2-instance-layout.html">2.2 Instance Layout</a>
            
        </div>
        <div class="nav_next">
            
                
                <a href="3-admin-model.html">3 - Administrative Model</a>
            
        </div>
        <div class="clearfix"></div>
    </div>


            
	<h1 id="225---generic-instance-layout">2.2.5 - Generic Instance Layout</h1>
<p>This installer just contain everything needed to start <em>ApacheDS</em> but it will not create a daemon not a Windows Service. Would one like to start <em>ApacheDS</em>, it will have to start the <em>apacheds.sh</em> or <em>apacheds.bat</bat> script shell.</p>
<p>The installer is just a raeball that needs to be oepend and deflated at the selected position  :</p>
<pre><code>tar xzpf apacheds-&lt;version&gt;.tar.gz
</code></pre>
<p>or</p>
<pre><code>gunzip apacheds-&lt;version&gt;.zip
</code></pre>
<p>The layout is quite simple :</p>
<pre><code>apacheds-&lt;version&gt;
  |
  +-- lib/
  |    |
  |    +-- apacheds-service-&lt;version&gt;.jar
  |
  +-- instances/
  |    |
  |    +-- default/
  |         |    
  |         +-- run/
  |         |    
  |         +-- partitions/
  |         |    
  |         +-- log/
  |         |    
  |         +-- conf/
  |         |    |
  |         |    +-- log4j.properties
  |         |    |
  |         |    +-- config.ldif
  |         |
  |         +-- cache/
  |
  +-- bin/
  |    |
  |    +-- apacheds.bat
  |    |
  |    +-- apacheds.sh
  |    |
  |    +-- cpappend.bat
  |    
  +-- NOTICE
  |
  +-- LICENSE
</code></pre>
<p>In order to start the server, you will have to make the shell script executable (it is not by default):</p>
<pre><code>$ chmod u+x apacheds-&lt;version&gt;/bin/apacheds.sh
</code></pre>
<h2 id="starting-the-server">Starting the server</h2>
<p>Starting the server is as simple as starting the script :</p>
<pre><code>$ ./apacheds-&lt;version&gt;/bin/apacheds.sh start
Using ADS_HOME:    .../apacheds-&lt;version&gt;
Using JAVA_HOME:   /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/

Starting ApacheDS instance 'default'...
$
</code></pre>
<h2 id="stopping-the-server">Stopping the server</h2>
<p>The server is now started. To stop it, you have to execute this command :</p>
<pre><code>$ ./apacheds-&lt;version&gt;/bin/apacheds.sh stop
Using ADS_HOME:    .../apacheds-&lt;version&gt;
Using JAVA_HOME:   /Library/Java/JavaVirtualMachines/jdk1.7.0_55.jdk/Contents/Home/

Stoping ApacheDS instance 'default' running as 23080
ApacheDS instance 'default' stopped successfully
</code></pre>
<h2 id="selection-a-different-instance">Selection a different instance</h2>
<p>You can start many instances of the server, assuming you have duplicated the content of teh <em>instances/default</em> directory, and modified the <em>instances/default/conf/config.ldif</em> file (cahnge the transports so that there is no collision between servers)</p>
<h2 id="logs">Logs</h2>
<p>You can check what&rsquo;s going on in the <em>apacheds-<version>/instances/<instance-name>/log/apacheds.log</em> file, which is created using the configuration set in <em>apacheds-<version>/instances/<instance-name>/conf/log4j.properties</em>.</p>
<p>Typically, when you start the server, you will get such log :</p>
<pre><code>$ more apacheds.log
[10:53:05] WARN [org.apache.directory.server.core.DefaultDirectoryService] - You didn't change the admin password of 
directory service instance 'default'.  Please update the admin password as soon as possible to prevent a possible 
security breach.
</code></pre>
<p>and from the <em>apacheds-<version>/instances/<instance-name>/log/apacheds.out</em> file, which contains everything the server writes on the console, you will read :</p>
<pre><code>$ more apacheds.out 
[10:53:05] WARN [org.apache.directory.server.core.DefaultDirectoryService] - You didn't change the admin password of 
directory service instance 'default'.  Please update the admin password as soon as possible to prevent a possible 
security breach.
           _                     _          ____  ____   
          / \   _ __    ___  ___| |__   ___|  _ \/ ___|  
         / _ \ | '_ \ / _` |/ __| '_ \ / _ \ | | \___ \  
        / ___ \| |_) | (_| | (__| | | |  __/ |_| |___) | 
       /_/   \_\ .__/ \__,_|\___|_| |_|\___|____/|____/  
               |_|                                       
</code></pre>
<h3 id="log-configuration">Log configuration</h3>
<p>You can configure the log level and content by changing the content of the <em>/var/lib/apacheds-&lt;version&gt;/&lt;instance&gt;/&lt;conf&gt;/log4j.properties</em> file.</p>
<p>The default configuration is given below :</p>
<pre><code>log4j.rootCategory=WARN, R, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=${apacheds.log.dir}/apacheds.log

log4j.appender.R.MaxFileSize=1024KB
# Keep some backup files
log4j.appender.R.MaxBackupIndex=5

log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=[%d{HH:mm:ss}] %p [%c] - %m%n

log4j.appender.stdout.layout.ConversionPattern=[%d{HH:mm:ss}] %p [%c] - %m%n

# with these we'll not get innundated when switching to DEBUG
log4j.logger.jdbm.recman.BaseRecordManager=FATAL
log4j.logger.org.apache.directory.server.OPERATION_LOG=FATAL
log4j.logger.org.apache.directory.server.OPERATION_TIME=FATAL
log4j.logger.org.apache.directory.api.CODEC_LOG=FATAL
log4j.logger.org.apache.directory.server.ACI_LOG=FATAL

# Replication logs
log4j.logger.org.apache.directory.server.PROVIDER_LOG=FATAL
log4j.logger.org.apache.directory.server.CONSUMER_LOG=FATAL

# Search log
log4j.logger.org.apache.directory.CURSOR_LOG=FATAL

# Other logs
log4j.logger.org.apache.directory.api=FATAL
log4j.logger.org.apache.directory.server=FATAL
log4j.logger.net.sf.ehcache=FATAL
log4j.logger.org.apache.mina=FATAL
</code></pre>


            
    <div class="nav">
        <div class="nav_prev">
            
                
                <a href="2.2.4-windows-instance-layout.html">2.2.4 - Windows Instance Layout</a>
            
        </div>
        <div class="nav_up">
            
                
                <a href="2.2-instance-layout.html">2.2 Instance Layout</a>
            
        </div>
        <div class="nav_next">
            
                
                <a href="3-admin-model.html">3 - Administrative Model</a>
            
        </div>
        <div class="clearfix"></div>
    </div>


        </div>
        <div id="endContent"></div>
    </div>

    <div id="footer">
    &copy; 2003-2025, <a href="https://www.apache.org">The Apache Software Foundation</a> - <a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a><br />
    Apache Directory, ApacheDS, Apache Directory Server, Apache Directory Studio, Apache LDAP API, Apache Triplesec,
    Triplesec, Apache Mavibot, Mavibot, Apache eSCIMo, eSCIMo, Apache SCIMple, SCIMple,Fortress, Apache Fortress, EnMasse,
    Apache EnMasse, Apache Kerby, Kerby, Apache, the Apache feather logo, and the Apache Directory project logos are
    trademarks of The Apache Software Foundation.
</div>

</div>

</body>

</html>
